generator client {
    provider = "prisma-client-js"
    output   = "../generated/prisma-client"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

model Post {
    id     Int      @id @default(autoincrement())
    url    String   @unique
    domain String
    type   PostType

    content    String
    updatedAt  DateTime
    authorName String?

    embedding Unsupported("vector(1024)")?
}

enum PostType {
    NOW
    IDEAS
}

model ScrapeState {
    domain String  @id
    url    String?

    domainType DomainType   @default(INDIVIDUAL_SITE)
    status     ScrapeStatus
    scapedAt   DateTime?
}

enum DomainType {
    INDIVIDUAL_SITE
    DIRECTORY
}

enum ScrapeStatus {
    UNAVAILABLE
    NO_CONTENT
    REDIRECTED
    SCRAPED
}
